#zmodload zsh/zprof

# modularised config {{{

for config (~/.zsh/config/*.zsh) source $config

#}}}

# Source local configuration {{{

if [ -f $HOME/.zshrc.local ];
  then source $HOME/.zshrc.local
fi

#}}}

# *gen setup and config {{{

ZGEN_RESET_ON_CHANGE=(${HOME}/.zshrc)
source "${HOME}/.zsh/plugins/zgen/zgen.zsh"

if ! zgen saved; then
  zgen oh-my-zsh

  # oh-my-zsh plugins
  zgen oh-my-zsh plugins/git
  zgen oh-my-zsh plugins/fasd
  zgen oh-my-zsh plugins/brew
  zgen oh-my-zsh plugins/osx

  # zsh-users plugins
  zgen load zsh-users/zsh-syntax-highlighting
  zgen load zsh-users/zsh-history-substring-search
  zgen load zsh-users/zsh-completions src

  # local plugins
  zgen load "${HOME}/.zsh/plugins/fzf"
  zgen load "${HOME}/.zsh/plugins/zsh-git-prompt"

  # theme
  zgen load "${HOME}/.zsh/themes/scott/scott.zsh-theme"

  zgen save
fi

# }}}

# FZF config {{{

# do this last to ensure bindings aren't overwritten
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh

#}}}

# welcome message {{{

echo -e "Distro: OS X $(sw_vers -productVersion)"
echo -e "Kernel: `uname -smr`"
echo -e "Shell:  `zsh --version`"
echo -e "Uptime:" `uptime | sed 's/^.*up/up/'`
echo -ne "Current Time: "; date

#}}}

#zprof
